<!doctype html>
<html lang="ka">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ğŸáƒáƒ˜áƒ—áƒáƒœáƒ˜ áƒ›áƒáƒ¡áƒ¬áƒáƒ•áƒšáƒ”áƒ”áƒ‘áƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡</title>

<!-- CodeMirror v5 CSS (dark + light themes) -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/theme/material-darker.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/theme/eclipse.min.css">

<style>
  :root{
    --panel:#0b1220; --muted:#94a3b8;
    --title-color:#e6eef8;
    --wrap-bg: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.03));
  }
  /* áƒ¨áƒ”áƒœ-áƒ˜áƒ¡ áƒ“áƒ˜áƒ–áƒáƒ˜áƒœáƒ˜ áƒ£áƒªáƒ•áƒšáƒ”áƒšáƒ˜áƒ */
  .py-ide-wrap{max-width:1100px;margin:28px auto;padding:18px;border-radius:14px;
    background:var(--wrap-bg);
    box-shadow:0 8px 30px rgba(2,6,23,0.6);
    font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial;
  }
  .editor-card{background:var(--panel);padding:12px;border-radius:12px;min-height:420px;display:flex;flex-direction:column}
  .toolbar{display:flex;gap:8px;margin-bottom:8px}
  .btn{background:#0b1220;border:1px solid rgba(255,255,255,0.04);color:#e6eef8;padding:8px 10px;border-radius:8px;font-size:13px;cursor:pointer}
  .btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}
  .editor{flex:1;border-radius:8px;overflow:hidden}
  .panel{background:#071224;border-radius:8px;padding:12px;color:var(--muted);font-size:13px;margin-top:12px}
  .term{background:#000;color:#e6eef8;padding:10px;border-radius:6px;height:280px;overflow:auto;font-family:monospace;font-size:13px;line-height:1.4;white-space:pre-wrap}
  .small{font-size:12px;color:var(--muted)}
  .footer{margin-top:12px;color:var(--muted);font-size:12px;display:flex;justify-content:space-between;align-items:center}
  .status{font-size:12px;color:#9ad0ff}
  .CodeMirror{height:100%}

  /* áƒ›áƒáƒáƒªáƒ˜áƒšáƒ”áƒ‘áƒ¡ áƒ—áƒ”áƒ—áƒ  gutter áƒ¤áƒáƒœáƒ¡ */
  .CodeMirror-gutters {
    background: transparent !important;
    border-right: none !important;
  }
  .CodeMirror, .CodeMirror-scroll {
    background: #0b1220 !important;
    color: #e6eef8 !important;
  }

  /* Calibri for Georgian labels */
  .georgian { font-family: Calibri, "Segoe UI", Arial, sans-serif; }

  /* Interpreter dot */
  .status-dot { display:inline-block; width:11px; height:11px; border-radius:50%; margin-left:8px; vertical-align:middle; background:#888; border:1px solid rgba(0,0,0,0.2); }
  .status-dot.ok { background: #00c853; }   /* green */
  .status-dot.busy { background: #ef5350; } /* red */
  .status-dot.loading { background: #999; }

  /* Day / Night mode support */
  .py-ide-wrap.day {
    --panel: #ffffff;
    --muted: #475569;
    --title-color: #003399;
    --wrap-bg: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.98));
    box-shadow: 0 6px 18px rgba(2,6,23,0.05);
  }
  .py-ide-wrap.day .editor-card { background: var(--panel); color: #0b1220; }
  .py-ide-wrap.day .term { background:#f8fafc; color:#0b1220; font-family:monospace; }
  .py-ide-wrap.day .btn { background: transparent; border:1px solid rgba(0,0,0,0.06); color: var(--title-color); }
  .py-ide-wrap.day .btn.secondary { color: var(--muted); }
  .py-ide-wrap.day .CodeMirror, .py-ide-wrap.day .CodeMirror-scroll { background: #fff !important; color: #0b1220 !important; }

  /* terminal input styling (inline) */
  .term .prompt { display:inline; }
  .term input.terminal-input {
    background: transparent;
    border: none;
    outline: none;
    color: inherit;
    font-family: monospace;
    font-size: 13px;
    vertical-align: baseline;
    min-width: 20px;
  }

  /* keep layout/spacing same as original */
</style>
</head>
<body>
  <!-- IDE áƒ›áƒ®áƒáƒšáƒáƒ“ áƒáƒ› div-áƒ¨áƒ˜ -->
  <div class="py-ide-wrap" id="pyWrap">
    <header>
      <h1 class="georgian" style="color:#003399;font-size:22px;margin:0">:: ğŸáƒáƒ˜áƒ—áƒáƒœáƒ˜áƒ¡ áƒáƒ˜áƒ áƒ•áƒ”áƒšáƒ˜ áƒœáƒáƒ‘áƒ˜áƒ¯áƒ”áƒ‘áƒ˜</h1>
    </header>

    <!-- Assignment Instructions -->
    <div class="assignment-section georgian" style="background:#f8fafc;padding:16px;border-radius:8px;margin-bottom:16px;border-left:4px solid #003399;">
      <h2 style="color:#003399;font-size:18px;margin:0 0 8px 0">ğŸ“‹ áƒ“áƒáƒ•áƒáƒšáƒ”áƒ‘áƒ 1:</h2>
      <p style="margin:0;color:#475569;font-size:14px;line-height:1.5;">
        áƒ“áƒáƒ¬áƒ”áƒ áƒ”áƒ— áƒáƒ áƒáƒ’áƒ áƒáƒ›áƒ ğŸ áƒáƒ˜áƒ—áƒáƒœáƒ–áƒ”, áƒ áƒáƒ›áƒ”áƒšáƒ˜áƒª áƒ”áƒ™áƒ áƒáƒœáƒ–áƒ” áƒáƒ©áƒ•áƒ”áƒœáƒ”áƒ‘áƒ¡ áƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ¡. áƒ›áƒáƒ’áƒáƒšáƒ˜áƒ—áƒáƒ“: "Hello World" áƒáƒœ "áƒ’áƒáƒ›áƒáƒ áƒ¯áƒáƒ‘áƒ áƒ›áƒ¡áƒáƒ¤áƒšáƒ˜áƒ!".
        <br><strong>áƒ›áƒ˜áƒ–áƒáƒœáƒ˜:</strong> áƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ˜áƒ¡ áƒ”áƒ™áƒ áƒáƒœáƒ–áƒ” áƒ’áƒáƒ›áƒáƒ¢áƒáƒœáƒ, print() áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ˜áƒ¡ áƒ’áƒáƒ›áƒáƒ§áƒ”áƒœáƒ”áƒ‘áƒ.
      </p>
    </div>

    <!-- Assignment Status -->
    <div id="assignmentStatus" class="assignment-status georgian" style="background:#fef3c7;padding:12px;border-radius:8px;margin-bottom:16px;border-left:4px solid #f59e0b;display:none;">
      <div style="display:flex;align-items:center;gap:8px;">
        <span id="statusIcon" style="font-size:20px;">ğŸ¯</span>
        <span id="statusText" style="color:#92400e;font-weight:bold;">áƒ“áƒáƒ•áƒáƒšáƒ”áƒ‘áƒ˜áƒ¡ áƒ¡áƒ¢áƒáƒ¢áƒ£áƒ¡áƒ˜</span>
      </div>
    </div>

    <div class="editor-card">
      <div class="toolbar">
        <button id="runBtn" class="btn georgian">â–¶ áƒ’áƒáƒ¨áƒ•áƒ”áƒ‘áƒ</button>
        <button id="stopBtn" class="btn secondary georgian">â–  áƒ’áƒáƒ©áƒ”áƒ áƒ”áƒ‘áƒ</button>
        <button id="clearCodeBtn" class="btn secondary georgian">áƒ™áƒáƒ“áƒ˜áƒ¡ áƒ¬áƒáƒ¨áƒšáƒ</button>
        <button id="clearOutputBtn" class="btn secondary georgian">áƒ¨áƒ”áƒ“áƒ”áƒ’áƒ˜áƒ¡ áƒ¬áƒáƒ¨áƒšáƒ</button>

        <div style="flex:1"></div>

        <!-- pictogram day/night toggle -->
        <button id="themeToggle" class="btn secondary georgian" title="áƒ¦áƒáƒ›áƒ” / áƒ“áƒ¦áƒ”" aria-label="áƒ¦áƒáƒ›áƒ”/áƒ“áƒ¦áƒ”">ğŸŒ™</button>

        <div style="width:12px"></div>

        <div class="small georgian">áƒ˜áƒœáƒ¢áƒ”áƒ áƒáƒ áƒ”áƒ¢áƒáƒ¢áƒáƒ áƒ˜:<span id="pyStatusDot" class="status-dot loading" title="áƒ˜áƒœáƒ¢áƒ”áƒ áƒáƒ áƒ”áƒ¢áƒáƒ¢áƒáƒ áƒ˜áƒ¡ áƒ›áƒ“áƒ’áƒáƒ›áƒáƒ áƒ”áƒáƒ‘áƒ"></span></div>
      </div>

      <div class="editor" id="editor"></div>

      <!-- Console IDE-áƒ¡ áƒ¥áƒ•áƒ”áƒ›áƒáƒ— â€” changed to div to allow inline input element -->
      <div class="panel">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
          <strong class="georgian" style="color:#fff">áƒ¢áƒ”áƒ áƒ›áƒ˜áƒœáƒáƒšáƒ˜</strong>
          <span class="georgian" style="color:#94a3b8;font-size:12px;">áƒ™áƒáƒ“áƒ˜áƒ¡ áƒ¨áƒ”áƒ“áƒ”áƒ’áƒ˜ áƒáƒ¥ áƒ’áƒáƒ›áƒáƒ©áƒœáƒ“áƒ”áƒ‘áƒ</span>
        </div>
        <div id="terminal" class="term" tabindex="0"></div>
      </div>

      <div class="footer georgian">
        <div>Â© áƒ“áƒáƒ—áƒ áƒ›áƒáƒšáƒáƒœáƒ˜áƒ. 2025 - áƒáƒ˜áƒ—áƒáƒœáƒ˜áƒ¡ áƒ“áƒáƒ•áƒáƒšáƒ”áƒ‘áƒ</div>
        <div class="georgian" style="font-size:11px;color:#94a3b8;">áƒ˜áƒ¡áƒ¬áƒáƒ•áƒšáƒ”áƒ— áƒáƒ áƒáƒ’áƒ áƒáƒ›áƒ˜áƒ áƒ”áƒ‘áƒ áƒ›áƒáƒ áƒ¢áƒ˜áƒ•áƒáƒ“!</div>
      </div>
    </div>
  </div>

  <!-- CodeMirror v5 -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/python/python.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/addon/edit/matchbrackets.min.js"></script>

  <!-- Pyodide -->
  <script src="https://cdn.jsdelivr.net/pyodide/v0.28.2/full/pyodide.js"></script>

  <script>
  (function(){
    const runBtn = document.getElementById('runBtn');
    const stopBtn = document.getElementById('stopBtn');
    const clearCodeBtn = document.getElementById('clearCodeBtn');
    const clearOutputBtn = document.getElementById('clearOutputBtn');
    const terminal = document.getElementById('terminal');
    const pyStatusDot = document.getElementById('pyStatusDot');
    const pyWrap = document.getElementById('pyWrap');
    const themeToggle = document.getElementById('themeToggle');

    const initialCode = ``;
    const editor = CodeMirror(document.getElementById('editor'), {
      value: initialCode,
      mode: 'python',
      theme: 'material-darker', // dark by default
      lineNumbers: true,
      matchBrackets: true,
      indentUnit: 4,
      autofocus: true
    });

    function appendOutput(text){
      // Append text exactly as received.
      // Use text nodes so that existing input element remains usable.
      // Convert to string and keep newlines.
      const txt = String(text);
      // If terminal currently has an active input, insert before it; otherwise append normally.
      const activeInput = terminal.querySelector('input.terminal-input');
      if(activeInput){
        // create a text node after the input
        const after = document.createTextNode(txt);
        terminal.appendChild(after);
      }else{
        terminal.appendChild(document.createTextNode(txt));
      }
      // scroll
      terminal.scrollTop = terminal.scrollHeight;
    }
    function clearTerminal(){ terminal.innerHTML = ''; }

    let pyodide = null;
    let isBusy = false;

    function setInterpreterState(state){
      // states: 'loading', 'ok', 'busy'
      pyStatusDot.classList.remove('loading','ok','busy');
      if(state === 'ok') pyStatusDot.classList.add('ok');
      else if(state === 'busy') pyStatusDot.classList.add('busy');
      else pyStatusDot.classList.add('loading');
    }

    // INPUT handling: when Python calls input(), we'll show the prompt in terminal and
    // create an inline <input> for the user to type. The prompt text will be displayed,
    // and when the user presses Enter the input value (without prompt) will be returned.
    let pendingInputResolve = null;
    function showPromptAndGetInput(promptText){
      // Append the prompt text (without newline) so it looks like: "What is your name? "
      const promptSpan = document.createElement('span');
      promptSpan.className = 'prompt';
      promptSpan.textContent = promptText ?? '';
      terminal.appendChild(promptSpan);

      // create input element
      const inputEl = document.createElement('input');
      inputEl.type = 'text';
      inputEl.className = 'terminal-input';
      terminal.appendChild(inputEl);
      inputEl.focus();

      // scroll into view
      terminal.scrollTop = terminal.scrollHeight;

      return new Promise(resolve => {
        // store resolver so we can resolve also from other places if needed
        pendingInputResolve = (value) => {
          // remove input element and replace with the echoed value + newline
          try{
            // find and remove inputEl
            if(inputEl.parentElement) inputEl.parentElement.removeChild(inputEl);
          }catch(e){}
          // echo user input and newline
          terminal.appendChild(document.createTextNode(String(value) + '\n'));
          pendingInputResolve = null;
          terminal.scrollTop = terminal.scrollHeight;
          resolve(String(value));
        };

        // enter key handling
        inputEl.addEventListener('keydown', function(ev){
          if(ev.key === 'Enter'){
            ev.preventDefault();
            const v = inputEl.value;
            pendingInputResolve && pendingInputResolve(v);
          } else if (ev.key === 'c' && ev.ctrlKey){
            // emulate ctrl+c - cancel input
            ev.preventDefault();
            pendingInputResolve && pendingInputResolve('');
          }
        }, { once: false });

        // optional: blur => still keep input (do nothing)
      });
    }

    async function initPyodideAndPackages(){
      setInterpreterState('loading');
      try{
        pyodide = await loadPyodide({
          indexURL: "https://cdn.jsdelivr.net/pyodide/v0.28.2/full/"
        });
        // configure IO
        pyodide.setStdout({
          batched: (s) => { appendOutput(s); }
        });
        pyodide.setStderr({
          batched: (s) => { appendOutput(s); }
        });
        // setStdin(prompt) can return a Promise (async)
        pyodide.setStdin({
          prompt: async (req) => {
            // req contains the prompt text (may be empty)
            // We must show it in the terminal and return user input
            const promptText = req ?? '';
            // ensure promptText does not include additional newline at end
            return await showPromptAndGetInput(promptText);
          }
        });
        setInterpreterState('ok');
      }catch(e){
        appendOutput('Failed to load Pyodide: ' + e + '\n');
        setInterpreterState('loading');
      }
    }
    initPyodideAndPackages();

    // áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ”áƒ‘áƒ˜áƒ¡ áƒ“áƒ”áƒ¢áƒáƒšáƒ£áƒ áƒ˜ áƒáƒ®áƒ¡áƒœáƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡ áƒ¢áƒ”áƒ áƒ›áƒ˜áƒœáƒáƒšáƒ¨áƒ˜
    function getDetailedErrorExplanation(code, errorOutput = '') {
      const codeStr = String(code).trim();
      const codeLower = codeStr.toLowerCase();
      const errorLower = String(errorOutput).toLowerCase();
      
      // áƒ¨áƒ”áƒ•áƒáƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ— Python-áƒ˜áƒ¡ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ”áƒ‘áƒ¡ áƒáƒ˜áƒ áƒ•áƒ”áƒš áƒ áƒ˜áƒ’áƒ¨áƒ˜
      if (errorLower.includes('syntaxerror') && errorLower.includes('unterminated')) {
        return 'âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: áƒ‘áƒ áƒ­áƒ§áƒáƒšáƒ”áƒ‘áƒ˜ áƒáƒ  áƒáƒ áƒ˜áƒ¡ áƒ“áƒáƒ®áƒ£áƒ áƒ£áƒšáƒ˜\nğŸ’¡ áƒ áƒ©áƒ”áƒ•áƒ: áƒ¨áƒ”áƒáƒ›áƒáƒ¬áƒ›áƒ”áƒ—, áƒ áƒáƒ› áƒ§áƒ•áƒ”áƒšáƒ áƒ‘áƒ áƒ­áƒ§áƒáƒšáƒ˜ (") áƒáƒœ (\') áƒ“áƒáƒ®áƒ£áƒ áƒ£áƒšáƒ˜áƒ';
      }
      
      if (errorLower.includes('syntaxerror') && errorLower.includes('eol')) {
        return 'âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: áƒ‘áƒ áƒ­áƒ§áƒáƒšáƒ”áƒ‘áƒ˜ áƒáƒ  áƒáƒ áƒ˜áƒ¡ áƒ“áƒáƒ®áƒ£áƒ áƒ£áƒšáƒ˜\nğŸ’¡ áƒ áƒ©áƒ”áƒ•áƒ: áƒ¨áƒ”áƒáƒ›áƒáƒ¬áƒ›áƒ”áƒ—, áƒ áƒáƒ› áƒ§áƒ•áƒ”áƒšáƒ áƒ‘áƒ áƒ­áƒ§áƒáƒšáƒ˜ (") áƒáƒœ (\') áƒ“áƒáƒ®áƒ£áƒ áƒ£áƒšáƒ˜áƒ';
      }
      
      if (errorLower.includes('syntaxerror') && errorLower.includes('invalid syntax')) {
        return 'âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒ¡áƒ˜áƒœáƒ¢áƒáƒ¥áƒ¡áƒ˜\nğŸ’¡ áƒ áƒ©áƒ”áƒ•áƒ: áƒ¨áƒ”áƒáƒ›áƒáƒ¬áƒ›áƒ”áƒ—, áƒ áƒáƒ› áƒ§áƒ•áƒ”áƒšáƒ áƒ¤áƒ áƒ©áƒ®áƒ˜áƒšáƒ˜, áƒ‘áƒ áƒ­áƒ§áƒáƒšáƒ˜ áƒ“áƒ áƒáƒ áƒ¬áƒ”áƒ áƒ¢áƒ˜áƒšáƒ˜ áƒ¡áƒ¬áƒáƒ áƒáƒ“ áƒáƒ áƒ˜áƒ¡ áƒ“áƒáƒ¬áƒ”áƒ áƒ˜áƒšáƒ˜';
      }
      
      // áƒ¨áƒ”áƒ•áƒáƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ— áƒ‘áƒ”áƒ­áƒ“áƒ•áƒ˜áƒ¡ áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ˜áƒ¡ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ”áƒ‘áƒ¡ áƒ™áƒáƒ“áƒ˜áƒ¡ áƒáƒœáƒáƒšáƒ˜áƒ–áƒ˜áƒ—
      if (codeLower.includes('print')) {
        // áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒáƒ áƒ—áƒáƒ’áƒ áƒáƒ¤áƒ˜áƒ - áƒ¥áƒáƒ áƒ—áƒ£áƒšáƒ˜ áƒ¡áƒ˜áƒ¢áƒ§áƒ•áƒ áƒ‘áƒ”áƒ­áƒ“áƒ•áƒ
        if (codeLower.includes('áƒ‘áƒ”áƒ­áƒ“áƒ•áƒ')) {
          return 'âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: "áƒ‘áƒ”áƒ­áƒ“áƒ•áƒ" áƒ£áƒœáƒ“áƒ áƒ˜áƒ§áƒáƒ¡ "print"\nğŸ’¡ áƒ áƒ©áƒ”áƒ•áƒ: áƒ“áƒáƒ¬áƒ”áƒ áƒ”áƒ— print("áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ˜") - print áƒ˜áƒœáƒ’áƒšáƒ˜áƒ¡áƒ£áƒ áƒáƒ“!';
        }
        
        // áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒ“áƒ˜áƒ“áƒ˜ áƒáƒ¡áƒáƒ”áƒ‘áƒ˜ - Print, PRINT
        if (codeStr.match(/\bPrint\s*\(/) || codeStr.match(/\bPRINT\s*\(/)) {
          return 'âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: print áƒ£áƒœáƒ“áƒ áƒ˜áƒ§áƒáƒ¡ áƒ›áƒªáƒ˜áƒ áƒ” áƒáƒ¡áƒáƒ”áƒ‘áƒ˜áƒ—\nğŸ’¡ áƒ áƒ©áƒ”áƒ•áƒ: áƒ“áƒáƒ¬áƒ”áƒ áƒ”áƒ— print("áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ˜") - print áƒ›áƒªáƒ˜áƒ áƒ” áƒáƒ¡áƒáƒ”áƒ‘áƒ˜áƒ—!';
        }
        
        // áƒ¨áƒ”áƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ: printdddd") - print áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒáƒ¡ áƒ£áƒœáƒ“áƒ áƒ›áƒáƒ°áƒ§áƒ•áƒ”áƒ¡ áƒ¦áƒ˜áƒ áƒ¤áƒ áƒ©áƒ®áƒ˜áƒšáƒ˜ áƒ“áƒ áƒ¦áƒ˜áƒ áƒ‘áƒ áƒ­áƒ§áƒáƒšáƒ˜
        if (codeStr.match(/print[a-zA-Z][^"]*"\s*\)/)) {
          return 'âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: print áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒáƒ¡ áƒ£áƒœáƒ“áƒ áƒ›áƒáƒ°áƒ§áƒ•áƒ”áƒ¡ áƒ¦áƒ˜áƒ áƒ¤áƒ áƒ©áƒ®áƒ˜áƒšáƒ˜ áƒ“áƒ áƒ¦áƒ˜áƒ áƒ‘áƒ áƒ­áƒ§áƒáƒšáƒ˜\nğŸ’¡ áƒ áƒ©áƒ”áƒ•áƒ: áƒ“áƒáƒ¬áƒ”áƒ áƒ”áƒ— print("áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ˜") - áƒ¦áƒ˜áƒ áƒ¤áƒ áƒ©áƒ®áƒ˜áƒšáƒ˜ ( áƒ“áƒ áƒ¦áƒ˜áƒ áƒ‘áƒ áƒ­áƒ§áƒáƒšáƒ˜ " áƒáƒ£áƒªáƒ˜áƒšáƒ”áƒ‘áƒ”áƒšáƒ˜áƒ!';
        }
        
        // áƒ¨áƒ”áƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ: print"dddd") - print áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒáƒ¡ áƒ£áƒœáƒ“áƒ áƒ›áƒáƒ°áƒ§áƒ•áƒ”áƒ¡ áƒ¦áƒ˜áƒ áƒ¤áƒ áƒ©áƒ®áƒ˜áƒšáƒ˜
        if (codeStr.match(/print\s*"[^"]*"\s*\)/)) {
          return 'âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: print áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒáƒ¡ áƒ£áƒœáƒ“áƒ áƒ›áƒáƒ°áƒ§áƒ•áƒ”áƒ¡ áƒ¦áƒ˜áƒ áƒ¤áƒ áƒ©áƒ®áƒ˜áƒšáƒ˜\nğŸ’¡ áƒ áƒ©áƒ”áƒ•áƒ: áƒ“áƒáƒ¬áƒ”áƒ áƒ”áƒ— print("áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ˜") - áƒ¦áƒ˜áƒ áƒ¤áƒ áƒ©áƒ®áƒ˜áƒšáƒ˜ ( áƒáƒ£áƒªáƒ˜áƒšáƒ”áƒ‘áƒ”áƒšáƒ˜áƒ!';
        }
        
        // áƒ¨áƒ”áƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ: print(dddd") - áƒáƒ  áƒáƒ áƒ˜áƒ¡ áƒ¦áƒ˜áƒ áƒ‘áƒ áƒ­áƒ§áƒáƒšáƒ˜
        if (codeStr.match(/print\s*\([^"]*"\s*\)/)) {
          return 'âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: áƒáƒ  áƒáƒ áƒ˜áƒ¡ áƒ¦áƒ˜áƒ áƒ‘áƒ áƒ­áƒ§áƒáƒšáƒ˜\nğŸ’¡ áƒ áƒ©áƒ”áƒ•áƒ: áƒ“áƒáƒ¬áƒ”áƒ áƒ”áƒ— print("áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ˜") - áƒ¦áƒ˜áƒ áƒ‘áƒ áƒ­áƒ§áƒáƒšáƒ˜ " áƒáƒ£áƒªáƒ˜áƒšáƒ”áƒ‘áƒ”áƒšáƒ˜áƒ!';
        }
        
        // áƒ¨áƒ”áƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ: print("dddd" - áƒáƒ  áƒáƒ áƒ˜áƒ¡ áƒ“áƒáƒ®áƒ£áƒ áƒ£áƒšáƒ˜ áƒ¤áƒ áƒ©áƒ®áƒ˜áƒšáƒ˜
        if (codeStr.match(/print\s*\(\s*"[^"]*"\s*$/)) {
          return 'âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: áƒáƒ  áƒáƒ áƒ˜áƒ¡ áƒ“áƒáƒ®áƒ£áƒ áƒ£áƒšáƒ˜ áƒ¤áƒ áƒ©áƒ®áƒ˜áƒšáƒ˜\nğŸ’¡ áƒ áƒ©áƒ”áƒ•áƒ: áƒ“áƒáƒ¬áƒ”áƒ áƒ”áƒ— print("áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ˜") - áƒ“áƒáƒ®áƒ£áƒ áƒ£áƒšáƒ˜ áƒ¤áƒ áƒ©áƒ®áƒ˜áƒšáƒ˜ ) áƒáƒ£áƒªáƒ˜áƒšáƒ”áƒ‘áƒ”áƒšáƒ˜áƒ!';
        }
        
        // áƒ¨áƒ”áƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ: print("dddd) - áƒáƒ  áƒáƒ áƒ˜áƒ¡ áƒ“áƒáƒ®áƒ£áƒ áƒ£áƒšáƒ˜ áƒ‘áƒ áƒ­áƒ§áƒáƒšáƒ˜
        if (codeStr.match(/print\s*\(\s*"[^"]*\)/)) {
          return 'âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: áƒáƒ  áƒáƒ áƒ˜áƒ¡ áƒ“áƒáƒ®áƒ£áƒ áƒ£áƒšáƒ˜ áƒ‘áƒ áƒ­áƒ§áƒáƒšáƒ˜\nğŸ’¡ áƒ áƒ©áƒ”áƒ•áƒ: áƒ“áƒáƒ¬áƒ”áƒ áƒ”áƒ— print("áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ˜") - áƒ“áƒáƒ®áƒ£áƒ áƒ£áƒšáƒ˜ áƒ‘áƒ áƒ­áƒ§áƒáƒšáƒ˜ " áƒáƒ£áƒªáƒ˜áƒšáƒ”áƒ‘áƒ”áƒšáƒ˜áƒ!';
        }
        
        // áƒ¨áƒ”áƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ: print(dddd) - áƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ˜ áƒ‘áƒ áƒ­áƒ§áƒáƒšáƒ”áƒ‘áƒ˜áƒ¡ áƒ’áƒáƒ áƒ”áƒ¨áƒ”áƒ
        if (codeStr.match(/print\s*\(\s*[^"')\d\s][^)]*\)/) && !codeStr.match(/print\s*\(\s*["\']/) && !codeStr.match(/print\s*\(\s*\d/)) {
          return 'âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: áƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ˜ "ddd" áƒ‘áƒ áƒ­áƒ§áƒáƒšáƒ”áƒ‘áƒ¨áƒ˜ áƒ£áƒœáƒ“áƒ áƒ˜áƒ§áƒáƒ¡\nğŸ’¡ áƒ áƒ©áƒ”áƒ•áƒ: áƒ“áƒáƒ¬áƒ”áƒ áƒ”áƒ— print("ddd") - áƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ˜ áƒ‘áƒ áƒ­áƒ§áƒáƒšáƒ”áƒ‘áƒ¨áƒ˜ áƒ£áƒœáƒ“áƒ áƒ˜áƒ§áƒáƒ¡!';
        }
        
        // áƒ¨áƒ”áƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ: print"dddd" - áƒáƒ áƒ’áƒ£áƒ›áƒ”áƒœáƒ¢áƒ˜ áƒ¤áƒ áƒ©áƒ®áƒ˜áƒšáƒ”áƒ‘áƒ¨áƒ˜ áƒ£áƒœáƒ“áƒ áƒ˜áƒ§áƒáƒ¡
        if (codeStr.match(/print\s*"[^"]*"/) && !codeStr.match(/print\s*\(\s*"/)) {
          return 'âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: print áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ˜áƒ¡ áƒáƒ áƒ’áƒ£áƒ›áƒ”áƒœáƒ¢áƒ˜ áƒ¤áƒ áƒ©áƒ®áƒ˜áƒšáƒ”áƒ‘áƒ¨áƒ˜ áƒ£áƒœáƒ“áƒ áƒ˜áƒ§áƒáƒ¡\nğŸ’¡ áƒ áƒ©áƒ”áƒ•áƒ: áƒ“áƒáƒ¬áƒ”áƒ áƒ”áƒ— print("ddd") - áƒ¤áƒ áƒ©áƒ®áƒ˜áƒšáƒ”áƒ‘áƒ˜ ( ) áƒáƒ£áƒªáƒ˜áƒšáƒ”áƒ‘áƒ”áƒšáƒ˜áƒ!';
        }
        
        // áƒ¤áƒ áƒ©áƒ®áƒ˜áƒšáƒ”áƒ‘áƒ˜áƒ¡ áƒ’áƒáƒ áƒ”áƒ¨áƒ” - print Hello World
        if (codeLower.includes('print ') && !codeLower.includes('print(')) {
          return 'âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: print áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒáƒ¡ áƒ¤áƒ áƒ©áƒ®áƒ˜áƒšáƒ”áƒ‘áƒ˜ áƒáƒ  áƒáƒ¥áƒ•áƒ¡\nğŸ’¡ áƒ áƒ©áƒ”áƒ•áƒ: áƒ“áƒáƒ¬áƒ”áƒ áƒ”áƒ— print("áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ˜") - áƒ¤áƒ áƒ©áƒ®áƒ˜áƒšáƒ”áƒ‘áƒ˜ áƒáƒ£áƒªáƒ˜áƒšáƒ”áƒ‘áƒ”áƒšáƒ˜áƒ!';
        }
        
        // áƒ¤áƒ áƒ©áƒ®áƒ˜áƒšáƒ”áƒ‘áƒ˜áƒ¡ áƒ“áƒáƒ®áƒ£áƒ áƒ•áƒ˜áƒ¡ áƒ¨áƒ”áƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ - áƒ–áƒáƒ’áƒáƒ“áƒ˜ áƒ¨áƒ”áƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ
        const openParens = (codeStr.match(/\(/g) || []).length;
        const closeParens = (codeStr.match(/\)/g) || []).length;
        if (openParens > closeParens) {
          return 'âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: áƒ¤áƒ áƒ©áƒ®áƒ˜áƒšáƒ”áƒ‘áƒ˜ áƒáƒ  áƒáƒ áƒ˜áƒ¡ áƒ“áƒáƒ®áƒ£áƒ áƒ£áƒšáƒ˜\nğŸ’¡ áƒ áƒ©áƒ”áƒ•áƒ: áƒ¨áƒ”áƒáƒ›áƒáƒ¬áƒ›áƒ”áƒ—, áƒ áƒáƒ› áƒ§áƒ•áƒ”áƒšáƒ áƒ¦áƒ˜áƒ áƒ¤áƒ áƒ©áƒ®áƒ˜áƒšáƒ˜ ( áƒ“áƒáƒ®áƒ£áƒ áƒ£áƒšáƒ˜áƒ )';
        }
        
        // áƒ‘áƒ áƒ­áƒ§áƒáƒšáƒ”áƒ‘áƒ˜áƒ¡ áƒ“áƒáƒ®áƒ£áƒ áƒ•áƒ˜áƒ¡ áƒ¨áƒ”áƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ - áƒ–áƒáƒ’áƒáƒ“áƒ˜ áƒ¨áƒ”áƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ
        const openQuotes = (codeStr.match(/"/g) || []).length;
        const openSingleQuotes = (codeStr.match(/'/g) || []).length;
        
        if (openQuotes % 2 !== 0) {
          return 'âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: áƒ‘áƒ áƒ­áƒ§áƒáƒšáƒ”áƒ‘áƒ˜ áƒáƒ  áƒáƒ áƒ˜áƒ¡ áƒ“áƒáƒ®áƒ£áƒ áƒ£áƒšáƒ˜\nğŸ’¡ áƒ áƒ©áƒ”áƒ•áƒ: áƒ¨áƒ”áƒáƒ›áƒáƒ¬áƒ›áƒ”áƒ—, áƒ áƒáƒ› áƒ§áƒ•áƒ”áƒšáƒ áƒ‘áƒ áƒ­áƒ§áƒáƒšáƒ˜ (") áƒ“áƒáƒ®áƒ£áƒ áƒ£áƒšáƒ˜áƒ';
        }
        
        if (openSingleQuotes % 2 !== 0) {
          return 'âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: áƒ‘áƒ áƒ­áƒ§áƒáƒšáƒ”áƒ‘áƒ˜ áƒáƒ  áƒáƒ áƒ˜áƒ¡ áƒ“áƒáƒ®áƒ£áƒ áƒ£áƒšáƒ˜\nğŸ’¡ áƒ áƒ©áƒ”áƒ•áƒ: áƒ¨áƒ”áƒáƒ›áƒáƒ¬áƒ›áƒ”áƒ—, áƒ áƒáƒ› áƒ§áƒ•áƒ”áƒšáƒ áƒ‘áƒ áƒ­áƒ§áƒáƒšáƒ˜ (\') áƒ“áƒáƒ®áƒ£áƒ áƒ£áƒšáƒ˜áƒ';
        }
        
        // áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒ¡áƒ˜áƒœáƒ¢áƒáƒ¥áƒ¡áƒ˜ - áƒ–áƒáƒ’áƒáƒ“áƒ˜ áƒ¨áƒ”áƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ (áƒ›áƒ®áƒáƒšáƒáƒ“ áƒ—áƒ£ áƒ¡áƒ®áƒ•áƒ áƒ¨áƒ”áƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ”áƒ‘áƒ˜ áƒ•áƒ”áƒ  áƒ’áƒáƒ˜áƒáƒ áƒ)
        const printRegex = /print\s*\(\s*["\'].*["\']\s*\)/;
        const printNumberRegex = /print\s*\(\s*\d/;
        const printExpressionRegex = /print\s*\(\s*[\d\s\+\-\*\/\(\)]+\)/;
        
        if (!printRegex.test(codeStr) && !printNumberRegex.test(codeStr) && !printExpressionRegex.test(codeStr)) {
          return 'âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: print() áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒáƒ“ áƒáƒ áƒ˜áƒ¡ áƒ“áƒáƒ¬áƒ”áƒ áƒ˜áƒšáƒ˜\nğŸ’¡ áƒ áƒ©áƒ”áƒ•áƒ: áƒ“áƒáƒ¬áƒ”áƒ áƒ”áƒ— print("áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ˜") - áƒ›áƒáƒ’áƒáƒšáƒ˜áƒ—áƒáƒ“: print("Hello World")';
        }
      }
      
      // áƒ—áƒ£ print áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ áƒ¡áƒáƒ”áƒ áƒ—áƒáƒ“ áƒáƒ  áƒáƒ áƒ˜áƒ¡
      if (!codeLower.includes('print')) {
        return 'âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: áƒ™áƒáƒ“áƒ¨áƒ˜ print() áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ áƒáƒ  áƒáƒ áƒ˜áƒ¡\nğŸ’¡ áƒ áƒ©áƒ”áƒ•áƒ: áƒ’áƒáƒ›áƒáƒ˜áƒ§áƒ”áƒœáƒ”áƒ— print() áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ áƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ˜áƒ¡ áƒ’áƒáƒ›áƒáƒ¡áƒáƒ©áƒ”áƒœáƒáƒ“\nğŸ“ áƒ›áƒáƒ’áƒáƒšáƒ˜áƒ—áƒ˜: print("áƒ’áƒáƒ›áƒáƒ áƒ¯áƒáƒ‘áƒ áƒ›áƒ¡áƒáƒ¤áƒšáƒ˜áƒ!")';
      }
      
      return 'âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: áƒ™áƒáƒ“áƒ¨áƒ˜ áƒáƒ áƒáƒ‘áƒšáƒ”áƒ›áƒáƒ\nğŸ’¡ áƒ áƒ©áƒ”áƒ•áƒ: áƒ§áƒ£áƒ áƒáƒ“áƒ¦áƒ”áƒ‘áƒ˜áƒ— áƒ¨áƒ”áƒáƒ›áƒáƒ¬áƒ›áƒ”áƒ— áƒ™áƒáƒ“áƒ˜ áƒ“áƒ áƒ¡áƒªáƒáƒ“áƒ”áƒ— áƒ®áƒ”áƒšáƒáƒ®áƒšáƒ';
    }

    // áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ”áƒ‘áƒ˜áƒ¡ áƒ›áƒáƒ áƒ¢áƒ˜áƒ•áƒáƒ“ áƒ’áƒáƒ¡áƒáƒ’áƒ”áƒ‘áƒáƒ“ áƒ’áƒáƒ“áƒáƒ¡áƒáƒ¥áƒªáƒ”áƒ•áƒáƒ“
    function simplifyError(errorText) {
      const error = String(errorText);
      
      // Print áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒáƒ¡áƒ—áƒáƒœ áƒ“áƒáƒ™áƒáƒ•áƒ¨áƒ˜áƒ áƒ”áƒ‘áƒ£áƒšáƒ˜ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ”áƒ‘áƒ˜
      if (error.includes('NameError') && error.includes('print')) {
        return 'âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: print áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒáƒ“ áƒáƒ áƒ˜áƒ¡ áƒ“áƒáƒ¬áƒ”áƒ áƒ˜áƒšáƒ˜\nğŸ’¡ áƒ áƒ©áƒ”áƒ•áƒ: áƒ“áƒáƒ¬áƒ”áƒ áƒ”áƒ— print("áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ˜") - print áƒ›áƒªáƒ˜áƒ áƒ” áƒáƒ¡áƒáƒ”áƒ‘áƒ˜áƒ— áƒ“áƒ áƒ¤áƒ áƒ©áƒ®áƒ˜áƒšáƒ”áƒ‘áƒ˜áƒ—!';
      }
      
      if (error.includes('SyntaxError') && error.includes('print')) {
        return 'âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: print áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒáƒ“ áƒáƒ áƒ˜áƒ¡ áƒ“áƒáƒ¬áƒ”áƒ áƒ˜áƒšáƒ˜\nğŸ’¡ áƒ áƒ©áƒ”áƒ•áƒ: áƒ“áƒáƒ¬áƒ”áƒ áƒ”áƒ— print("áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ˜") - áƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ˜ áƒ‘áƒ áƒ­áƒ§áƒáƒšáƒ”áƒ‘áƒ¨áƒ˜ áƒ£áƒœáƒ“áƒ áƒ˜áƒ§áƒáƒ¡!';
      }
      
      // SyntaxError áƒ¨áƒ”áƒ›áƒ—áƒ®áƒ•áƒ”áƒ•áƒ”áƒ‘áƒ˜
      if (error.includes('SyntaxError: unterminated string literal')) {
        return 'âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: áƒ‘áƒ áƒ­áƒ§áƒáƒšáƒ”áƒ‘áƒ˜ áƒáƒ  áƒáƒ áƒ˜áƒ¡ áƒ“áƒáƒ®áƒ£áƒ áƒ£áƒšáƒ˜\nğŸ’¡ áƒ áƒ©áƒ”áƒ•áƒ: áƒ¨áƒ”áƒáƒ›áƒáƒ¬áƒ›áƒ”áƒ—, áƒ áƒáƒ› áƒ§áƒ•áƒ”áƒšáƒ áƒ‘áƒ áƒ­áƒ§áƒáƒšáƒ˜ (") áƒáƒœ (\') áƒ“áƒáƒ®áƒ£áƒ áƒ£áƒšáƒ˜áƒ';
      }
      
      if (error.includes('SyntaxError: invalid syntax')) {
        return 'âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒ¡áƒ˜áƒœáƒ¢áƒáƒ¥áƒ¡áƒ˜\nğŸ’¡ áƒ áƒ©áƒ”áƒ•áƒ: áƒ¨áƒ”áƒáƒ›áƒáƒ¬áƒ›áƒ”áƒ—, áƒ áƒáƒ› áƒ§áƒ•áƒ”áƒšáƒ áƒ¤áƒ áƒ©áƒ®áƒ˜áƒšáƒ˜, áƒ‘áƒ áƒ­áƒ§áƒáƒšáƒ˜ áƒ“áƒ áƒáƒ áƒ¬áƒ”áƒ áƒ¢áƒ˜áƒšáƒ˜ áƒ¡áƒ¬áƒáƒ áƒáƒ“ áƒáƒ áƒ˜áƒ¡ áƒ“áƒáƒ¬áƒ”áƒ áƒ˜áƒšáƒ˜';
      }
      
      if (error.includes('SyntaxError: EOL while scanning string literal')) {
        return 'âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: áƒ‘áƒ áƒ­áƒ§áƒáƒšáƒ”áƒ‘áƒ˜ áƒáƒ  áƒáƒ áƒ˜áƒ¡ áƒ“áƒáƒ®áƒ£áƒ áƒ£áƒšáƒ˜\nğŸ’¡ áƒ áƒ©áƒ”áƒ•áƒ: áƒ¨áƒ”áƒáƒ›áƒáƒ¬áƒ›áƒ”áƒ—, áƒ áƒáƒ› áƒ§áƒ•áƒ”áƒšáƒ áƒ‘áƒ áƒ­áƒ§áƒáƒšáƒ˜ (") áƒáƒœ (\') áƒ“áƒáƒ®áƒ£áƒ áƒ£áƒšáƒ˜áƒ';
      }
      
      if (error.includes('IndentationError')) {
        return 'âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒ¨áƒ”áƒ¬áƒ”áƒ•áƒ\nğŸ’¡ áƒ áƒ©áƒ”áƒ•áƒ: áƒ’áƒáƒ›áƒáƒ˜áƒ§áƒ”áƒœáƒ”áƒ— 4 space (áƒªáƒáƒ áƒ˜áƒ”áƒšáƒ˜ áƒáƒ“áƒ’áƒ˜áƒšáƒ˜) áƒáƒœ Tab áƒ¦áƒ˜áƒšáƒáƒ™áƒ˜ áƒ¨áƒ”áƒ¬áƒ”áƒ•áƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡';
      }
      
      // NameError áƒ¨áƒ”áƒ›áƒ—áƒ®áƒ•áƒ”áƒ•áƒ”áƒ‘áƒ˜
      if (error.includes('NameError: name') && error.includes('is not defined')) {
        const match = error.match(/name '([^']+)' is not defined/);
        if (match) {
          const varName = match[1].toLowerCase();
          if (varName.includes('print')) {
            return 'âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: print áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒáƒ“ áƒáƒ áƒ˜áƒ¡ áƒ“áƒáƒ¬áƒ”áƒ áƒ˜áƒšáƒ˜\nğŸ’¡ áƒ áƒ©áƒ”áƒ•áƒ: áƒ“áƒáƒ¬áƒ”áƒ áƒ”áƒ— print("áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ˜") - print áƒ›áƒªáƒ˜áƒ áƒ” áƒáƒ¡áƒáƒ”áƒ‘áƒ˜áƒ—!';
          }
          return `âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: áƒªáƒ•áƒšáƒáƒ“áƒ˜ '${match[1]}' áƒáƒ  áƒáƒ áƒ˜áƒ¡ áƒ’áƒáƒœáƒ¡áƒáƒ–áƒ¦áƒ•áƒ áƒ£áƒšáƒ˜\nğŸ’¡ áƒ áƒ©áƒ”áƒ•áƒ: áƒ¨áƒ”áƒáƒ›áƒáƒ¬áƒ›áƒ”áƒ—, áƒ áƒáƒ› áƒªáƒ•áƒšáƒáƒ“áƒ˜ áƒ¡áƒ¬áƒáƒ áƒáƒ“ áƒáƒ áƒ˜áƒ¡ áƒ“áƒáƒ¬áƒ”áƒ áƒ˜áƒšáƒ˜ áƒáƒœ áƒ¯áƒ”áƒ  áƒ’áƒáƒœáƒ¡áƒáƒ–áƒ¦áƒ•áƒ áƒ”áƒ— áƒ˜áƒ¡`;
        }
      }
      
      // TypeError áƒ¨áƒ”áƒ›áƒ—áƒ®áƒ•áƒ”áƒ•áƒ”áƒ‘áƒ˜
      if (error.includes('TypeError: unsupported operand type(s)')) {
        return 'âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒ¢áƒ˜áƒáƒ˜áƒ¡ áƒáƒáƒ”áƒ áƒáƒªáƒ˜áƒ\nğŸ’¡ áƒ áƒ©áƒ”áƒ•áƒ: áƒ¨áƒ”áƒáƒ›áƒáƒ¬áƒ›áƒ”áƒ—, áƒ áƒáƒ› áƒ áƒ˜áƒªáƒ®áƒ•áƒ”áƒ‘áƒ—áƒáƒœ áƒ›áƒ£áƒ¨áƒáƒáƒ‘áƒ˜áƒ¡áƒáƒ¡ áƒ§áƒ•áƒ”áƒšáƒáƒ¤áƒ”áƒ áƒ˜ áƒ áƒ˜áƒªáƒ®áƒ•áƒ˜áƒ';
      }
      
      // ValueError áƒ¨áƒ”áƒ›áƒ—áƒ®áƒ•áƒ”áƒ•áƒ”áƒ‘áƒ˜
      if (error.includes('ValueError')) {
        return 'âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒ›áƒœáƒ˜áƒ¨áƒ•áƒœáƒ”áƒšáƒáƒ‘áƒ\nğŸ’¡ áƒ áƒ©áƒ”áƒ•áƒ: áƒ¨áƒ”áƒáƒ›áƒáƒ¬áƒ›áƒ”áƒ—, áƒ áƒáƒ› áƒ¨áƒ”áƒ§áƒ•áƒáƒœáƒ˜áƒšáƒ˜ áƒ›áƒœáƒ˜áƒ¨áƒ•áƒœáƒ”áƒšáƒáƒ‘áƒ áƒ¡áƒ¬áƒáƒ áƒ˜áƒ';
      }
      
      // ZeroDivisionError
      if (error.includes('ZeroDivisionError')) {
        return 'âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: áƒœáƒ£áƒšáƒ–áƒ” áƒ’áƒáƒ§áƒáƒ¤áƒ\nğŸ’¡ áƒ áƒ©áƒ”áƒ•áƒ: áƒáƒ  áƒ¨áƒ”áƒ˜áƒ«áƒšáƒ”áƒ‘áƒ áƒ áƒ˜áƒªáƒ®áƒ•áƒ˜áƒ¡ áƒœáƒ£áƒšáƒ–áƒ” áƒ’áƒáƒ§áƒáƒ¤áƒ';
      }
      
      // áƒ—áƒ£ áƒ¡áƒ®áƒ•áƒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒáƒ, áƒ›áƒáƒ áƒ¢áƒ˜áƒ•áƒáƒ“ áƒ•áƒáƒ©áƒ•áƒ”áƒœáƒ”áƒ‘áƒ—
      if (error.includes('Traceback')) {
        return 'âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: áƒ™áƒáƒ“áƒ¨áƒ˜ áƒáƒ áƒáƒ‘áƒšáƒ”áƒ›áƒáƒ\nğŸ’¡ áƒ áƒ©áƒ”áƒ•áƒ: áƒ§áƒ£áƒ áƒáƒ“áƒ¦áƒ”áƒ‘áƒ˜áƒ— áƒ¨áƒ”áƒáƒ›áƒáƒ¬áƒ›áƒ”áƒ— áƒ™áƒáƒ“áƒ˜ áƒ“áƒ áƒ¡áƒªáƒáƒ“áƒ”áƒ— áƒ®áƒ”áƒšáƒáƒ®áƒšáƒ';
      }
      
      // áƒ¡áƒ®áƒ•áƒ áƒ¨áƒ”áƒ›áƒ—áƒ®áƒ•áƒ”áƒ•áƒ”áƒ‘áƒ˜
      return 'âŒ áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ: ' + error;
    }

    // áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ áƒ“áƒáƒ•áƒáƒšáƒ”áƒ‘áƒ˜áƒ¡ áƒ¨áƒ”áƒ¡áƒáƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒšáƒáƒ“
    function checkAssignment(code, output) {
      const codeStr = String(code).trim();
      const codeLower = codeStr.toLowerCase();
      const outputStr = String(output).toLowerCase().trim();
      
      // áƒ¨áƒ”áƒ•áƒáƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ—, áƒ áƒáƒ› áƒ™áƒáƒ“áƒ˜ áƒáƒ  áƒáƒ áƒ˜áƒ¡ áƒªáƒáƒ áƒ˜áƒ”áƒšáƒ˜
      if (codeStr.length === 0) {
        return { success: false, simpleMessage: 'áƒ›áƒ˜áƒ–áƒáƒœáƒ˜ áƒ›áƒ˜áƒ¦áƒ¬áƒ”áƒ£áƒšáƒ˜ áƒáƒ áƒáƒ, áƒ¡áƒªáƒáƒ“áƒ”áƒ— áƒ®áƒ”áƒšáƒáƒ®áƒšáƒ' };
      }
      
      // áƒ¨áƒ”áƒ•áƒáƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ— print() áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ˜áƒ¡ áƒ¡áƒ¬áƒáƒ  áƒ’áƒáƒ›áƒáƒ§áƒ”áƒœáƒ”áƒ‘áƒáƒ¡
      if (!codeLower.includes('print(')) {
        // áƒ¨áƒ”áƒ•áƒáƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ—, áƒáƒ áƒ˜áƒ¡ áƒ—áƒ£ áƒáƒ áƒ áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒ•áƒáƒ áƒ˜áƒáƒœáƒ¢áƒ”áƒ‘áƒ˜
        if (codeLower.includes('print')) {
          if (codeLower.includes('print ')) {
            return { success: false, simpleMessage: 'áƒ›áƒ˜áƒ–áƒáƒœáƒ˜ áƒ›áƒ˜áƒ¦áƒ¬áƒ”áƒ£áƒšáƒ˜ áƒáƒ áƒáƒ, áƒ¡áƒªáƒáƒ“áƒ”áƒ— áƒ®áƒ”áƒšáƒáƒ®áƒšáƒ' };
          } else if (codeLower.includes('print(') && !codeLower.includes('print("') && !codeLower.includes("print('")) {
            return { success: false, simpleMessage: 'áƒ›áƒ˜áƒ–áƒáƒœáƒ˜ áƒ›áƒ˜áƒ¦áƒ¬áƒ”áƒ£áƒšáƒ˜ áƒáƒ áƒáƒ, áƒ¡áƒªáƒáƒ“áƒ”áƒ— áƒ®áƒ”áƒšáƒáƒ®áƒšáƒ' };
          } else {
            return { success: false, simpleMessage: 'áƒ›áƒ˜áƒ–áƒáƒœáƒ˜ áƒ›áƒ˜áƒ¦áƒ¬áƒ”áƒ£áƒšáƒ˜ áƒáƒ áƒáƒ, áƒ¡áƒªáƒáƒ“áƒ”áƒ— áƒ®áƒ”áƒšáƒáƒ®áƒšáƒ' };
          }
        } else {
          return { success: false, simpleMessage: 'áƒ›áƒ˜áƒ–áƒáƒœáƒ˜ áƒ›áƒ˜áƒ¦áƒ¬áƒ”áƒ£áƒšáƒ˜ áƒáƒ áƒáƒ, áƒ¡áƒªáƒáƒ“áƒ”áƒ— áƒ®áƒ”áƒšáƒáƒ®áƒšáƒ' };
        }
      }
      
      // áƒ¨áƒ”áƒ•áƒáƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ— print() áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ˜áƒ¡ áƒ¡áƒ˜áƒœáƒ¢áƒáƒ¥áƒ¡áƒ¡
      const printRegex = /print\s*\(\s*["\'].*["\']\s*\)/;
      if (!printRegex.test(codeStr)) {
        if (codeLower.includes('print(')) {
          return { success: false, simpleMessage: 'áƒ›áƒ˜áƒ–áƒáƒœáƒ˜ áƒ›áƒ˜áƒ¦áƒ¬áƒ”áƒ£áƒšáƒ˜ áƒáƒ áƒáƒ, áƒ¡áƒªáƒáƒ“áƒ”áƒ— áƒ®áƒ”áƒšáƒáƒ®áƒšáƒ' };
        }
      }
      
      // áƒ¨áƒ”áƒ•áƒáƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ—, áƒ áƒáƒ› áƒ™áƒáƒ“áƒ˜ áƒ¬áƒáƒ áƒ›áƒáƒ¢áƒ”áƒ‘áƒ˜áƒ— áƒ¨áƒ”áƒ¡áƒ áƒ£áƒšáƒ“áƒ (áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ áƒáƒ  áƒ˜áƒ§áƒ)
      if (outputStr.includes('âŒ') || outputStr.includes('áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ')) {
        return { success: false, simpleMessage: 'áƒ›áƒ˜áƒ–áƒáƒœáƒ˜ áƒ›áƒ˜áƒ¦áƒ¬áƒ”áƒ£áƒšáƒ˜ áƒáƒ áƒáƒ, áƒ¡áƒªáƒáƒ“áƒ”áƒ— áƒ®áƒ”áƒšáƒáƒ®áƒšáƒ' };
      }
      
      // áƒ¨áƒ”áƒ•áƒáƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ—, áƒ áƒáƒ› áƒ áƒáƒ˜áƒ›áƒ” áƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ˜ áƒáƒ©áƒ•áƒ”áƒœáƒ”áƒ¡
      if (outputStr.length === 0 || outputStr === 'none' || outputStr === 'null') {
        return { success: false, simpleMessage: 'áƒ›áƒ˜áƒ–áƒáƒœáƒ˜ áƒ›áƒ˜áƒ¦áƒ¬áƒ”áƒ£áƒšáƒ˜ áƒáƒ áƒáƒ, áƒ¡áƒªáƒáƒ“áƒ”áƒ— áƒ®áƒ”áƒšáƒáƒ®áƒšáƒ' };
      }
      
      // áƒ—áƒ£ áƒ§áƒ•áƒ”áƒšáƒáƒ¤áƒ”áƒ áƒ˜ áƒ™áƒáƒ áƒ’áƒáƒ“áƒáƒ
      return { 
        success: true, 
        simpleMessage: 'ğŸ‰ áƒ’áƒ˜áƒšáƒáƒªáƒáƒ•áƒ—! áƒ“áƒáƒ•áƒáƒšáƒ”áƒ‘áƒ áƒ¬áƒáƒ áƒ›áƒáƒ¢áƒ”áƒ‘áƒ˜áƒ— áƒ¨áƒ”áƒ¡áƒ áƒ£áƒšáƒ“áƒ!\nâœ¨ áƒ—áƒ¥áƒ•áƒ”áƒœ áƒ˜áƒ¡áƒ¬áƒáƒ•áƒšáƒ”áƒ— print() áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ˜áƒ¡ áƒ’áƒáƒ›áƒáƒ§áƒ”áƒœáƒ”áƒ‘áƒ!\nğŸŒŸ áƒ¨áƒ”áƒ¡áƒáƒœáƒ˜áƒ¨áƒœáƒáƒ•áƒ˜áƒ! áƒ’áƒáƒœáƒáƒ’áƒ áƒ«áƒ”áƒ— áƒáƒ áƒáƒ’áƒ áƒáƒ›áƒ˜áƒ áƒ”áƒ‘áƒ!' 
      };
    }

    // áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ áƒ¡áƒ¢áƒáƒ¢áƒ£áƒ¡áƒ˜áƒ¡ áƒ’áƒáƒ›áƒáƒ¡áƒáƒ©áƒ”áƒœáƒáƒ“
    function showAssignmentStatus(success, simpleMessage) {
      const statusDiv = document.getElementById('assignmentStatus');
      const statusIcon = document.getElementById('statusIcon');
      const statusText = document.getElementById('statusText');
      
      statusDiv.style.display = 'block';
      
      if (success) {
        statusDiv.style.background = '#d1fae5';
        statusDiv.style.borderLeftColor = '#10b981';
        statusIcon.textContent = 'ğŸ‰';
        statusText.style.color = '#065f46';
      } else {
        statusDiv.style.background = '#fef3c7';
        statusDiv.style.borderLeftColor = '#f59e0b';
        statusIcon.textContent = 'âŒ';
        statusText.style.color = '#92400e';
      }
      
      statusText.textContent = simpleMessage;
    }

    runBtn.addEventListener('click', async ()=>{
      if(!pyodide){ appendOutput('Pyodide áƒáƒ  áƒáƒ áƒ˜áƒ¡ áƒ›áƒ–áƒáƒ“.\n'); return; }
      
      // áƒ•áƒ˜áƒ¦áƒ”áƒ‘áƒ— áƒ™áƒáƒ“áƒ¡ áƒ“áƒ áƒ•áƒ¬áƒ›áƒ˜áƒœáƒ“áƒáƒ•áƒ— áƒ¢áƒ”áƒ áƒ›áƒ˜áƒœáƒáƒšáƒ¡
      const code = editor.getValue();
      clearTerminal();
      
      // áƒ•áƒ¬áƒ›áƒ˜áƒœáƒ“áƒáƒ•áƒ— áƒ¬áƒ˜áƒœáƒ áƒ¡áƒ¢áƒáƒ¢áƒ£áƒ¡áƒ¡
      document.getElementById('assignmentStatus').style.display = 'none';
      
      try{
        isBusy = true;
        setInterpreterState('busy');
        
        // áƒ•áƒáƒ¥áƒ¢áƒ˜áƒ•áƒ”áƒ‘áƒ— output-áƒ˜áƒ¡ áƒ©áƒáƒ¬áƒ”áƒ áƒáƒ¡
        let capturedOutput = '';
        let capturedError = '';
        const originalAppendOutput = appendOutput;
        appendOutput = function(text) {
          capturedOutput += String(text);
          originalAppendOutput(text);
        };
        
        // run Python code asynchronously so our async stdin handler works
        await pyodide.runPythonAsync(code);
        
        // áƒ•áƒáƒ‘áƒ áƒ£áƒœáƒ”áƒ‘áƒ— áƒáƒ áƒ˜áƒ’áƒ˜áƒœáƒáƒšáƒ£áƒ  áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒáƒ¡
        appendOutput = originalAppendOutput;
        
        // áƒ•áƒáƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ— áƒ“áƒáƒ•áƒáƒšáƒ”áƒ‘áƒáƒ¡ áƒ¤áƒ˜áƒœáƒáƒšáƒ£áƒ áƒáƒ“
        const finalResult = checkAssignment(code, capturedOutput);
        showAssignmentStatus(finalResult.success, finalResult.simpleMessage);
        
        // áƒ—áƒ£ áƒ“áƒáƒ•áƒáƒšáƒ”áƒ‘áƒ áƒáƒ  áƒáƒ áƒ˜áƒ¡ áƒ¨áƒ”áƒ¡áƒ áƒ£áƒšáƒ”áƒ‘áƒ£áƒšáƒ˜, áƒ•áƒáƒ©áƒ•áƒ”áƒœáƒ”áƒ‘áƒ— áƒ“áƒ”áƒ¢áƒáƒšáƒ£áƒ  áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒáƒ¡ áƒ¢áƒ”áƒ áƒ›áƒ˜áƒœáƒáƒšáƒ¨áƒ˜
        if (!finalResult.success && capturedOutput.length === 0) {
          const detailedError = getDetailedErrorExplanation(code, '');
          appendOutput(detailedError + '\n');
        }
        
      }catch(err){
        // áƒ•áƒ˜áƒ¦áƒ”áƒ‘áƒ— áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ˜áƒ¡ áƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ¡
        const errorText = String(err);
        
        // áƒ•áƒáƒ©áƒ•áƒ”áƒœáƒ”áƒ‘áƒ— áƒ“áƒ”áƒ¢áƒáƒšáƒ£áƒ  áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ˜áƒ¡ áƒáƒ®áƒ¡áƒœáƒáƒ¡ áƒ¢áƒ”áƒ áƒ›áƒ˜áƒœáƒáƒšáƒ¨áƒ˜
        const detailedError = getDetailedErrorExplanation(code, errorText);
        appendOutput(detailedError + '\n');
        
        // áƒ¨áƒ”áƒªáƒ“áƒáƒ›áƒ˜áƒ¡ áƒ¨áƒ”áƒ›áƒ—áƒ®áƒ•áƒ”áƒ•áƒáƒ¨áƒ˜ áƒ•áƒáƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ— áƒ“áƒáƒ•áƒáƒšáƒ”áƒ‘áƒáƒ¡
        const assignmentResult = checkAssignment(code, errorText);
        showAssignmentStatus(assignmentResult.success, assignmentResult.simpleMessage);
      }
      isBusy = false;
      setInterpreterState('ok');
    });

    stopBtn.addEventListener('click', ()=>{
      appendOutput('[Stop requested]\n');
      // Note: forcefully interrupting Pyodide/CPython isn't trivial. This button is informational.
    });

    clearCodeBtn.addEventListener('click', ()=>{ editor.setValue(''); });
    clearOutputBtn.addEventListener('click', ()=>{ clearTerminal(); });

    // Theme (day/night) toggle with pictograms
    let isDay = false; // default dark
    function applyTheme(){
      if(isDay){
        pyWrap.classList.add('day');
        editor.setOption('theme','eclipse'); // light theme
        themeToggle.textContent = 'â˜€ï¸';
        themeToggle.title = 'áƒ“áƒ¦áƒ”';
      }else{
        pyWrap.classList.remove('day');
        editor.setOption('theme','material-darker'); // dark theme
        themeToggle.textContent = 'ğŸŒ™';
        themeToggle.title = 'áƒ¦áƒáƒ›áƒ”';
      }
    }
    themeToggle.addEventListener('click', ()=>{
      isDay = !isDay;
      applyTheme();
    });
    applyTheme();

    // Allow clicking terminal to focus last input
    terminal.addEventListener('click', () => {
      const inputEl = terminal.querySelector('input.terminal-input');
      if(inputEl) inputEl.focus();
    });

    // If there's a pending input resolver exposed (edge cases), provide a global cancel on Escape
    document.addEventListener('keydown', (e) => {
      if(e.key === 'Escape' && pendingInputResolve){
        pendingInputResolve('');
      }
    });

    // NOTE: removed "stdout / stderr" labels and "objects=..." per your request.
  })();
  </script>
</body>
</html>
